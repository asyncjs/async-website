{"version":3,"sources":["lanyrd.js"],"names":["_lanyrd","jQuery","module","undefined","Collection","items","utils","isArray","item","index","len","length","Resource","get","this","options","url","data","deferred","fetch","success","error","state","PENDING","request","resource","config","requestType","JSONP","indexOf","done","resolveWith","fail","rejectWith","then","promise","lanyrd","parseUrl","a","document","createElement","object","Object","prototype","toString","call","each","fn","context","hasOwnProperty","keys","map","value","key","collected","push","apply","arguments","filter","extend","reciever","property","target","objects","Array","slice","count","invoke","method","args","pluck","path","fallback","keypath","Deferred","_","when","array","promises","type","rawRequest","xhr","reject","ajax","dataType","escape","string","replace","split","shift","pathname","href","JSON","constructor","related","parts","pop","join","noop","fetchRelated","fetchAllRelated","iterator","resources","requests","resolve","at","concat","PREV","NEXT","RESOLVED","REJECTED","rejected","fetched","collection","paginate","direction","paginated","first","last","pagination","page","num_pages","next","prev","all","inner","complete","remaining","combined","self","backward","flag","notifyWith","forward","always","API_DOMAIN","conference","person","apiUrl","place","topic","newer","noConflict","define","amd","exports","require","parse","root","createFlags","flags","i","flagsCache","breaker","AP","OP","hasOwn","forEach","_each","obj","l","_isFunction","class2type","[object Array]","[object Function]","_type","String","_d","Callbacks","memory","firing","firingStart","firingLength","firingIndex","list","stack","add","elem","unique","has","fire","stopOnFalse","once","disable","fireWith","remove","argIndex","argLength","splice","empty","disabled","lock","locked","fired","func","doneList","failList","progressList","lists","notify","progress","isResolved","isRejected","doneCallbacks","failCallbacks","progressCallbacks","pipe","fnDone","fnFail","fnProgress","newDefer","handler","returned","action","firstParam","resolveFunc","progressFunc","pValues","mixin","createXMLHTTPObject","XMLHttpFactories","factory","cached","XMLHttpRequest","ActiveXObject","json","open","onreadystatechange","readyState","status","responseText","send","jsonp","script","callback","uuid","encodeURIComponent","window","src","onload","test","parentNode","removeChild","head","insertBefore","lastChild","setTimeout","http","uri","parsed","res","on","chunk","statusCode","getElementsByTagName"],"mappings":"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","file":"lanyrd.js","sourcesContent":["/* global lanyrd */\n\n/*  lanyrd.js - v0.0.0\n *  Copyright 2011-2012, Dharmafly <http://dharmafly.com>\n *  Released under the MIT License\n *  More Information: https://github.com/dharmafly/lanyrd.js\n */\n(function( _lanyrd, jQuery, module, undefined ) {\n    \"use strict\";\n\n    var config, utils, lanyrd, parseUrl;\n\n    // Useful utility functions for working with deferred's.\n    utils = {\n        // Cached anchor element for parsing urls. This is used by url methods\n        // like .pathname().\n        a: module.document && module.document.createElement(\"a\" ),\n\n        // Check to see if the passed object is an array.\n        isArray: function( object ) {\n            return Object.prototype.toString.call( object ) === \"[object Array]\";\n          },\n\n        // Iterates over an array or object and calls the callback with each\n        // item.\n        each: function( items, fn, context ) {\n            var index = 0, length = items.length, item;\n            if ( typeof length === \"number\" ) {\n              for ( ; index < length; index += 1 ) {\n                item = items[ index ];\n                fn.call( context || item, item, index, items );\n              }\n            } else {\n              for ( index in items ) {\n                if ( items.hasOwnProperty( index ) ) {\n                  item = items[ index ];\n                  fn.call( context || item, item, index, items );\n                }\n              }\n            }\n            return items;\n          },\n\n        // Returns the keys for the object provided in an array.\n        keys: function( object ) {\n            return utils.map( object, function( value, key ) {\n                return key;\n              });\n          },\n\n        // Iterates over an array or object and collects the return values of\n        // each callback function and returns it in an array.\n        map: function( items, fn, context ) {\n            var collected = [];\n            utils.each( items, function( item ) {\n                collected.push( fn ? fn.apply( this, arguments ) : item );\n              }, context );\n            return collected;\n          },\n\n        // Iterates over an array or object and collects items where the\n        // callback returned a truthy value and returns them in an array.\n        filter: function( items, fn, context ) {\n            var collected = [];\n            utils.each( items, function( item ) {\n                if ( fn.apply( this, arguments ) ) {\n                  collected.push( item );\n                }\n              }, context );\n            return collected;\n          },\n\n        // Extend the first object passed as an argument with successive ones.\n        extend: function( reciever ) {\n            var target  = arguments[ 0 ],\n                objects = Array.prototype.slice.call( arguments, 1 ),\n                count = objects.length,\n                index = 0, object, property;\n\n            for ( ; index < count; index += 1 ) {\n              object = objects[ index ];\n              for ( property in object ) {\n                if ( object.hasOwnProperty( property ) ) {\n                  target[ property ] = object[ property ];\n                }\n              }\n            }\n\n            return target;\n          },\n\n        // Calls the method on the object provided, subsequent arguments will\n        // be passed in to the method. Returns an array containing the returned\n        // values of each function.\n        invoke: function( object, method /* args */ ) {\n            var collected = [], args = [].slice.call( arguments, 2 );\n            utils.each( object, function( item ) {\n                collected.push( item[ method ].apply( item, args ) );\n              });\n            return collected;\n          },\n\n        // Extracts a single property from each object in the collection.\n        pluck: function( object, path, fallback ) {\n            var args = [].slice.call( arguments, 2 );\n            return utils.map( object, function( item ) {\n                return utils.keypath( item, path, fallback );\n              });\n          },\n\n        // Creates a new deferred object.\n        deferred: function() {\n            if ( jQuery && jQuery.Deferred ) {\n              return new jQuery.Deferred();\n            }\n            return new utils._.Deferred();\n          },\n\n        // Allows you to determine when multiple promises have resolved. Each\n        // promise should be provided as an argument. Alternatively a single\n        // array of promises can be provided.\n        when: function( array ) {\n            var promises = arguments.length === 1 && utils.isArray( array ) ? array : arguments;\n            if ( jQuery && jQuery.Deferred ) {\n              return jQuery.when.apply( jQuery, promises );\n            }\n            return utils._.when.apply( utils._, promises );\n          },\n\n        // Requests a json representation from the url provided. Returns a\n        // promise object. This should be used to request resources from the\n        // lanyrd API, it includes specialised error handling for the API.\n        request: function( url ) {\n            var type     = config.requestType,\n                request  = utils.rawRequest( url, type ),\n                deferred = utils.deferred(),\n                promise  = deferred.promise({\n                    data: null,\n                    type: type,\n                    xhr:  type === utils.request.JSONP ? null : request\n                  });\n\n            request.then(function( data ) {\n                promise.data = data;\n                deferred[ !data || data.error ? \"reject\" : \"resolve\" ]( promise );\n              }, function() {\n                deferred.reject( promise );\n              });\n\n            return promise;\n          },\n\n        // Request function that will use jQuery if available otherwise fall back to\n        // the built in lanyrd methods. Allows the type to be specified, this\n        // can be used by scripts to request non lanyrd methods.\n        rawRequest: function( url, type ) {\n            type = type || \"json\";\n            if ( jQuery ) {\n              return jQuery.ajax({ url: url, dataType: type });\n            }\n            return lanyrd.utils[ type ]( url );\n          },\n\n        // Escapes html entities within a string.\n        // https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet#RULE_.231_-_HTML_Escape_Before_Inserting_Untrusted_Data_into_HTML_Element_Content\n        escape: function( string ) {\n            return (\"\" + string)\n            .replace( /&/g,  \"&amp;\" )\n            .replace( /</g,  \"&lt;\" )\n            .replace( />/g,  \"&gt;\" )\n            .replace( /\"/g,  \"&quot;\" )\n            .replace( /'/g,  \"&#x27;\" )\n            .replace( /\\//g, \"&#x2F;\" );\n          },\n\n        // Function for looking up a value in an object using a key path (period\n        // delimited string).\n        // Often useful when working with large objects such as JSON data returned\n        // from a server as it allows quick navigation to only the required\n        // information.\n        keypath: function keypath( object, path, fallback, prototype ) {\n            var keys = (path || \"\").split(\".\" ),\n                key;\n\n            if ( !path ) {\n              return object;\n            }\n\n            while ( object && keys.length ) {\n              key = keys.shift();\n\n              if ( object.hasOwnProperty( key ) || (prototype === true && object[ key ] !== undefined) ) {\n                object = object[ key ];\n\n                if ( keys.length === 0 && object !== undefined ) {\n                  return object;\n                }\n              } else {\n                break;\n              }\n            }\n\n            return (arguments.length > 2) ? fallback : null;\n          },\n\n        // Returns the pathname of a url.\n        pathname: function( url ) {\n            utils.a.href = url || \"/\";\n            return utils.a.pathname;\n          }\n      };\n\n    utils.request.JSON  = \"json\";\n    utils.request.JSONP = \"jsonp\";\n\n    // A Collection is simply a collection of objects, it provides support for\n    // iteration as well as getting properties and related resources. It treats the\n    // collection in the same way that jQuery does in that a getter method will\n    // return just the first item. To access all children the iterator methods\n    // should be used.\n    function Collection( items ) {\n      items = utils.isArray( items ) ? items : [ items ];\n      for ( var index = 0, len = items.length, item; index < len; index += 1 ) {\n        item = items[ index ];\n        if ( item instanceof Collection || item instanceof Resource ) {\n          item = item.get();\n        }\n        this[ index ] = item;\n      }\n      this.length = items.length;\n    }\n\n    Collection.prototype = {\n        constructor: Collection,\n\n        // Lookup keys in the attributes object, period delimited key paths can\n        // be used to access nested keys without having to check for the\n        // existence of each property. This method will return a single object\n        // for the first item in the list.\n        get: function( path, fallback ) {\n            return utils.keypath( this[ 0 ], path, fallback );\n          },\n\n        // Same as #get() but path returns the property with html entities escaped\n        // if it is a string, otherwise returns the coerced value.\n        escape: function( path, fallback ) {\n            return utils.escape( this.get( path, fallback ) );\n          },\n\n        // Gets a related resource for the key provided. If the current resource\n        // doesn't support the key then a rejected Resource will be returned.\n        // Accepts an optional prefix in case the object with the api urls is\n        // nested further into the model chain. For example a user is nested\n        // inside speaker and attendee objects.\n        //\n        // If the path provided returns a url then this will be loaded.\n        //\n        // Examples:\n        //\n        //     var related = speakers.related('user.user');\n        //     var related = conference.related('attendees');\n        //\n        //     // Direct path to a resource url also works.\n        //     var related = speakers.related('user.api_urls.user');\n        related: function( path ) {\n            var parts = path.split( \".\" ),\n                key   = parts.pop(),\n                url;\n\n            parts.push( \"api_urls\" );\n\n            // Needs to support various keypaths including.\n            // \"api_url\", \"api_urls.attendees\", \"user.api_urls.user\"\n            url = this.get( parts.join(\".\" ), {})[ key ];\n            if ( !url ) {\n              url = this.get( path );\n            }\n            return url ? new Resource({ url: url }) : Resource.noop();\n          },\n\n        // Same as #related() but immediately calls #fetch() on the resource.\n        fetchRelated: function( path, success, error ) {\n            return this.related( path ).fetch( success, error );\n          },\n\n        // Fetches the related resource for all items in the list. Useful for\n        // requesting all attendees to a conference for example. The method will\n        // return a generic promise object. #done() callbacks receive two\n        // arguments, an array of completed resources and an array of request\n        // (jqXHR) objects.\n        fetchAllRelated: function( path, success, error ) {\n            var deferred = utils.deferred();\n\n            function iterator( item ) { return item.fetchRelated( path ); }\n            jQuery.when.apply( jQuery, this.map( iterator ) ).then(function() {\n                var resources = [], requests = [];\n                jQuery.each( arguments, function() {\n                    requests.push( this[ 1 ] );\n                    resources.push( this[ 0 ] );\n                  });\n                deferred.resolve( resources, requests );\n              }, deferred.reject );\n\n            return deferred.promise().then( success, error );\n          },\n\n        // Get the object at the index provided. A negative index takes items\n        // from the end of the list.\n        at: function( index ) {\n            index = index < 0 ? index + this.length : index;\n            return this[ index ] || null;\n          }\n      };\n\n    utils.each([ \"each\", \"map\", \"filter\", \"pluck\", \"invoke\" ], function( method ) {\n        Collection.prototype[ method ] = function() {\n            return utils[ method ].apply( this, [].concat.apply( this, arguments ) );\n          };\n      });\n\n    // The Resource acts as a request builder for the API and provides basic\n    // methods for accessing the returned data. For most use cases it will be\n    // all you need to interact with the API. Each instance requires a full path\n    // to a Lanyrd resource which can then be fetched. Once loaded the data can\n    // be accessed and pages can be iterated. Using a Resource requires full\n    // knowledge of the returned data structure.\n    //\n    // Related resources can also be fetched using the #related() method this\n    // allows the API to be traversed using the keys found under the \"api_urls\"\n    // parameter.\n    function Resource( options ) {\n      options = options || {};\n\n      this.url  = options.url;\n      this.data = options.data || {};\n\n      var deferred = options.deferred || utils.deferred();\n      if ( this.url ) {\n        // We create the fetch method within the constructor to hide the\n        // deferred object within the closure.\n        this.fetch = function( success, error ) {\n            if ( this.state() !== Resource.PENDING ) {\n              return this;\n            }\n\n            var url = this.url, request, resource;\n\n            if ( config.requestType === utils.request.JSONP ) {\n              url += (url.indexOf( \"?\" ) < 0 ? \"?\" : \"&\") + \"callback=?\";\n            }\n            request  = utils.request( url );\n            resource = this;\n\n            request.done(function() {\n                resource.data = request.data;\n                deferred.resolveWith( resource, [ resource, request ]);\n              });\n            request.fail(function() {\n                deferred.rejectWith( resource, [ resource, request ]);\n              });\n\n            return this.then( success, error );\n          };\n      }\n      deferred.promise( this );\n    }\n\n    // Constants for use with pagination.\n    Resource.PREV = \"prev\";\n    Resource.NEXT = \"next\";\n\n    // Constants for use with Resource#state().\n    Resource.RESOLVED = \"resolved\";\n    Resource.REJECTED = \"rejected\";\n    Resource.PENDING  = \"pending\";\n\n    // Creates a rejected Resource that can be returned by methods when a\n    // request cannot be made. For example at the last page of a paginated\n    // collection or if no related resource exists.\n    Resource.noop = function( options ) {\n        var rejected = utils.deferred(),\n            noop = new Resource( utils.extend({ deferred: rejected }, options ) );\n\n        rejected.rejectWith( noop, [ noop, null ]);\n        return noop;\n      };\n\n    Resource.prototype = {\n        constructor: Resource,\n\n        url:   null,\n        data:   null,\n\n        // Actually defined in the constructor to hide the deferred object\n        // within a closure. This method loads the resource available at the\n        // Resource#url endpoint. If no href is provided to the constructor\n        // then this method is a no-op.\n        fetch: function() { return this; },\n\n        // Checks to see if the current resource was successfully loaded from\n        // the server. Will return false if the request failed or is still\n        // pending. Resource#state() can be used for more fine grained checks.\n        fetched: function() {\n            return this.state && this.state() === Resource.RESOLVED;\n          },\n\n        // Shortcut to Collection#related(). Can be used to fetch a related resource.\n        related: function( path ) {\n            return this.collection().related( path );\n          },\n\n        // Lookup keys in the raw data object returned from the server.\n        get: function( path, fallback ) {\n            return utils.keypath( this.data, path, fallback );\n          },\n\n        // Gets a path for a string with html entities escaped.\n        escape: function( path, fallback ) {\n            return utils.escape( this.get( path, fallback ) );\n          },\n\n        // Like #get() but wraps the resource at the end of the path in a Collection\n        // this makes it much easier to work with some of the resource data such\n        // as a list or user object.\n        collection: function( path ) {\n            var data = this.get( path );\n            if ( data ) {\n              data = new Collection( data );\n            }\n            return data;\n          },\n\n        // Paginates through the resource in the direction specified. Use one of the\n        // Resource.NEXT or Resource.PREV constants for the first argument. This\n        // method returns an unloaded Resource object. To actually fetch the\n        // page you must call #fetch().\n        paginate: function( direction ) {\n            var url = this.get( \"pagination.api_urls\", {})[ direction ];\n            return url ? new Resource({ url: url }) : Resource.noop();\n          },\n\n        // Checks to see if the current resource is paginated. It can be useful\n        // to call this before #next() #prev() or #all().\n        paginated: function() {\n            return this.get( \"pagination.num_pages\", 1 ) > 1;\n          },\n\n        // Checks to see if this resource is the first page. If there is no\n        // pagination then this will still return true.\n        first: function() {\n            return this.get(\"pagination.page\", 1 ) === 1;\n          },\n\n        // Checks to see if the resource is the last page. Returns true if there\n        // is only one page or there is no pagination data.\n        last: function() {\n            var pagination = this.get(\"pagination\", {});\n            return pagination.page === pagination.num_pages;\n          },\n\n        // Requests the next page of resources in a collection and returns the\n        // promised resource. This calls fetch internally, both success and\n        // error callbacks can be passed as arguments.\n        next: function( success, error ) {\n            return this.paginate( Resource.NEXT ).fetch().then( success, error );\n          },\n\n        // Requests the previous page of resources in a collection and returns the\n        // promised resource. This calls fetch internally, both success and\n        // error callbacks can be passed as arguments.\n        prev: function( success, error ) {\n            return this.paginate( Resource.PREV ).fetch().then( success, error );\n          },\n\n        // Walks through all pages for a paginated resource and collects the\n        // results in a single array. This is then returned as a new \"master\"\n        // Resource.\n        all: function( success, error ) {\n            var self      = this,\n                deferred  = utils.deferred(),\n                combined  = new Resource({ deferred: deferred });\n\n            function inner() {\n              var key = self.get(\"pagination.paginated_key\" ),\n                  collected = [],\n                  remaining = 2;\n\n              function complete( resource, request ) {\n                remaining -= 1;\n                if ( remaining ) {\n                  return;\n                }\n\n                if ( !request ) {\n                  combined.data = {};\n                  combined.data[ key ] = collected;\n                  deferred.resolveWith( combined, [ combined ]);\n                } else {\n                  deferred.rejectWith( combined, [ combined, request ]);\n                }\n              }\n\n              (function backward( resource ) {\n                  if ( !resource.flag ) {\n                    resource.flag = true;\n                    deferred.notifyWith( resource, arguments );\n                    collected = resource.get( key ).slice().concat( collected );\n                  }\n                  return resource.prev().then( backward, complete );\n                })( self );\n\n              (function forward( resource ) {\n                  if ( !resource.flag ) {\n                    resource.flag = true;\n                    deferred.notifyWith( resource, arguments );\n                    collected = collected.concat( resource.get( key ) );\n                  }\n                  return resource.next().then( forward, complete );\n                })( self );\n            }\n\n            // If the current object is not yet loaded then do so before\n            // loading related resources.\n            if ( this.fetched() ) {\n              inner();\n            } else {\n              this.fetch().always( inner );\n            }\n\n            return combined.then( success, error );\n          }\n      };\n\n    // The base API object.\n    lanyrd = {\n        API_DOMAIN: \"http://lanyrd.asyncjs.com\",\n\n        // Attempts to match a conference resource for the Lanyrd url provided.\n        // This breaks rest conventions but provides a nicer API for people to\n        // get started quickly.\n        conference: function( url ) {\n            return this.resource({ url: this.url( url ) });\n          },\n        person: function( url ) {\n            var apiUrl = this.url( url ).replace( /\\/profile\\//i, \"/people/\" );\n            return this.resource({ url: apiUrl });\n          },\n        place: function( url ) {\n            return this.resource({ url: this.url( url ) });\n          },\n        topic: function( url ) {\n            return this.resource({ url: this.url( url ) });\n          },\n        collection: function( object ) {\n            return new Collection( object );\n          },\n        resource: function( options ) {\n            return new Resource( options );\n          },\n        url: function( url ) {\n            // Oh dear, here we assume that a Lanyrd API endpoint is the same as\n            // the website. Ideally there should be some kind of lookup service\n            // that does this for us.\n            return this.API_DOMAIN + utils.pathname( url );\n          },\n        // Allows you to switch between JSON and JSONP transports.\n        config: function( newer ) {\n            utils.extend( config, newer );\n          },\n        utils: utils,\n        noConflict: function() {\n            module.lanyrd = _lanyrd;\n            return lanyrd;\n          },\n        Collection: Collection,\n        Resource: Resource\n      };\n\n    config = { requestType: utils.request.JSONP };\n\n    if ( typeof module.define === \"function\" && module.define.amd ) {\n      module.define(\"lanyrd\", function() {\n          return lanyrd;\n        });\n    } else if ( module.exports ) {\n      // Pass utils object into module factories to be augmented.\n      require(\"./lanyrd/deferred\" )( utils );\n      require(\"./lanyrd/request\" )( utils );\n\n      // Override pathname with node specific code.\n      parseUrl = require( \"url\" ).parse;\n      lanyrd.utils.pathname = function( url ) {\n          return parseUrl( url ).pathname;\n        };\n      // Default request type is now JSON.\n      config.requestType = utils.request.JSON;\n\n      module.exports = lanyrd;\n    } else {\n      module.lanyrd = lanyrd;\n    }\n\n  })( this.lanyrd, this.jQuery, typeof module !== \"undefined\" ? module : this );\n// Underscore Deferred library is wrapped in a closure into which we pass\n// lanyrd.utils, this allows us to capture the methods without adding them\n// to the window object.\n(function() {\n  // underscore.Deferred by wookiehangover <sam@quickleft.com>\n  // Released under the MIT License\n  // https://github.com/wookiehangover/underscore.Deferred\n  (function( root ) {\n\n    // Let's borrow a couple of things from Underscore that we'll need\n\n    // _.each\n    var breaker = {},\n        AP = Array.prototype,\n        OP = Object.prototype,\n\n        hasOwn = OP.hasOwnProperty,\n        toString = OP.toString,\n        forEach = AP.forEach,\n        slice = AP.slice;\n\n    var _each = function( obj, iterator, context ) {\n      var key, i, l;\n\n      if ( !obj ) {\n        return;\n      }\n      if ( forEach && obj.forEach === forEach ) {\n        obj.forEach( iterator, context );\n      } else if ( obj.length === +obj.length ) {\n        for ( i = 0, l = obj.length; i < l; i++ ) {\n          if ( i in obj && iterator.call( context, obj[ i ], i, obj ) === breaker ) {\n            return;\n          }\n        }\n      } else {\n        for ( key in obj ) {\n          if ( hasOwn.call( obj, key ) ) {\n            if ( iterator.call( context, obj[ key ], key, obj ) === breaker ) {\n              return;\n            }\n          }\n        }\n      }\n    };\n\n    // _.isFunction\n    var _isFunction = function( obj ) {\n      return !!(obj && obj.constructor && obj.call && obj.apply);\n    };\n\n    // _.extend\n    var _extend = function( obj ) {\n\n      _each( slice.call( arguments, 1 ), function( source ) {\n        var prop;\n\n        for ( prop in source ) {\n          if ( source[ prop ] !== void 0 ) {\n            obj[ prop ] = source[ prop ];\n          }\n        }\n      });\n      return obj;\n    };\n\n    // And some jQuery specific helpers\n\n    var class2type = { \"[object Array]\": \"array\", \"[object Function]\": \"function\" };\n\n    var _type = function( obj ) {\n      return !obj ?\n        String( obj ) :\n        class2type[ toString.call( obj ) ] || \"object\";\n    };\n\n    // Now start the jQuery-cum-Underscore implementation. Some very\n    // minor changes to the jQuery source to get this working.\n\n    var promiseMethods = \"done fail isResolved isRejected promise then always pipe\".split(\" \");\n\n    // Internal Deferred namespace\n    var _d = {};\n\n    var flagsCache = {};\n    // Convert String-formatted flags into Object-formatted ones and store in cache\n    function createFlags( flags ) {\n      var object = flagsCache[ flags ] = {},\n          i, length;\n      flags = flags.split( /\\s+/ );\n      for ( i = 0, length = flags.length; i < length; i++ ) {\n        object[ flags[ i ] ] = true;\n      }\n      return object;\n    }\n\n    _d.Callbacks = function( flags ) {\n\n        // Convert flags from String-formatted to Object-formatted\n        // (we check in cache first)\n        flags = flags ? ( flagsCache[ flags ] || createFlags( flags ) ) : {};\n\n        var // Actual callback list\n            list = [],\n            // Stack of fire calls for repeatable lists\n            stack = [],\n            // Last fire value (for non-forgettable lists)\n            memory,\n            // Flag to know if list is currently firing\n            firing,\n            // First callback to fire (used internally by add and fireWith)\n            firingStart,\n            // End of the loop when firing\n            firingLength,\n            // Index of currently firing callback (modified by remove if needed)\n            firingIndex,\n            // Add one or several callbacks to the list\n            add = function( args ) {\n                var i,\n                length,\n                elem,\n                type,\n                actual;\n                for ( i = 0, length = args.length; i < length; i++ ) {\n                  elem = args[ i ];\n                  type = _type( elem );\n                  if ( type === \"array\" ) {\n                    // Inspect recursively\n                    add( elem );\n                  } else if ( type === \"function\" ) {\n                    // Add if not in unique mode and callback is not in\n                    if ( !flags.unique || !self.has( elem ) ) {\n                      list.push( elem );\n                    }\n                  }\n                }\n              },\n            // Fire callbacks\n            fire = function( context, args ) {\n                args = args || [];\n                memory = !flags.memory || [ context, args ];\n                firing = true;\n                firingIndex = firingStart || 0;\n                firingStart = 0;\n                firingLength = list.length;\n                for ( ; list && firingIndex < firingLength; firingIndex++ ) {\n                  if ( list[ firingIndex ].apply( context, args ) === false && flags.stopOnFalse ) {\n                    memory = true; // Mark as halted\n                    break;\n                  }\n                }\n                firing = false;\n                if ( list ) {\n                  if ( !flags.once ) {\n                    if ( stack && stack.length ) {\n                      memory = stack.shift();\n                      self.fireWith( memory[ 0 ], memory[ 1 ] );\n                    }\n                  } else if ( memory === true ) {\n                    self.disable();\n                  } else {\n                    list = [];\n                  }\n                }\n              },\n            // Actual Callbacks object\n            self = {\n                // Add a callback or a collection of callbacks to the list\n                add: function() {\n                        if ( list ) {\n                          var length = list.length;\n                          add( arguments );\n                          // Do we need to add the callbacks to the\n                          // current firing batch?\n                          if ( firing ) {\n                            firingLength = list.length;\n                            // With memory, if we're not firing then\n                            // we should call right away, unless previous\n                            // firing was halted (stopOnFalse)\n                          } else if ( memory && memory !== true ) {\n                            firingStart = length;\n                            fire( memory[ 0 ], memory[ 1 ] );\n                          }\n                        }\n                        return this;\n                      },\n                // Remove a callback from the list\n                remove: function() {\n                            if ( list ) {\n                              var args = arguments,\n                                  argIndex = 0,\n                                           argLength = args.length;\n                              for ( ; argIndex < argLength ; argIndex++ ) {\n                                for ( var i = 0; i < list.length; i++ ) {\n                                  if ( args[ argIndex ] === list[ i ] ) {\n                                    // Handle firingIndex and firingLength\n                                    if ( firing ) {\n                                      if ( i <= firingLength ) {\n                                        firingLength--;\n                                        if ( i <= firingIndex ) {\n                                          firingIndex--;\n                                        }\n                                      }\n                                    }\n                                    // Remove the element\n                                    list.splice( i--, 1 );\n                                    // If we have some unicity property then\n                                    // we only need to do this once\n                                    if ( flags.unique ) {\n                                      break;\n                                    }\n                                  }\n                                }\n                              }\n                            }\n                            return this;\n                          },\n                // Control if a given callback is in the list\n                has: function( fn ) {\n                        if ( list ) {\n                          var i = 0,\n                              length = list.length;\n                          for ( ; i < length; i++ ) {\n                            if ( fn === list[ i ] ) {\n                              return true;\n                            }\n                          }\n                        }\n                        return false;\n                      },\n                // Remove all callbacks from the list\n                empty: function() {\n                          list = [];\n                          return this;\n                        },\n                // Have the list do nothing anymore\n                disable: function() {\n                            list = stack = memory = undefined;\n                            return this;\n                          },\n                // Is it disabled?\n                disabled: function() {\n                              return !list;\n                            },\n                // Lock the list in its current state\n                lock: function() {\n                          stack = undefined;\n                          if ( !memory || memory === true ) {\n                            self.disable();\n                          }\n                          return this;\n                        },\n                // Is it locked?\n                locked: function() {\n                            return !stack;\n                          },\n                // Call all callbacks with the given context and arguments\n                fireWith: function( context, args ) {\n                              if ( stack ) {\n                                if ( firing ) {\n                                  if ( !flags.once ) {\n                                    stack.push([ context, args ]);\n                                  }\n                                } else if ( !( flags.once && memory ) ) {\n                                  fire( context, args );\n                                }\n                              }\n                              return this;\n                            },\n                // Call all the callbacks with the given arguments\n                fire: function() {\n                          self.fireWith( this, arguments );\n                          return this;\n                        },\n                // To know if the callbacks have already been called at least once\n                fired: function() {\n                          return !!memory;\n                        }\n              };\n\n        return self;\n      };\n\n    _d.Deferred = function( func ) {\n          var doneList = _d.Callbacks( \"once memory\" ),\n              failList = _d.Callbacks( \"once memory\" ),\n              progressList = _d.Callbacks( \"memory\" ),\n              state = \"pending\",\n              lists = {\n                  resolve: doneList,\n                  reject: failList,\n                  notify: progressList\n                },\n              promise = {\n                  done: doneList.add,\n                  fail: failList.add,\n                  progress: progressList.add,\n\n                  state: function() {\n                      return state;\n                    },\n\n                  // Deprecated\n                  isResolved: doneList.fired,\n                  isRejected: failList.fired,\n\n                  then: function( doneCallbacks, failCallbacks, progressCallbacks ) {\n                      deferred.done( doneCallbacks ).fail( failCallbacks ).progress( progressCallbacks );\n                      return this;\n                    },\n                  always: function() {\n                      deferred.done.apply( deferred, arguments ).fail.apply( deferred, arguments );\n                      return this;\n                    },\n                  pipe: function( fnDone, fnFail, fnProgress ) {\n                      return _d.Deferred(function( newDefer ) {\n                          _each({\n                              done: [ fnDone, \"resolve\" ],\n                              fail: [ fnFail, \"reject\" ],\n                              progress: [ fnProgress, \"notify\" ]\n                            }, function( data, handler ) {\n                              var fn = data[ 0 ],\n                                  action = data[ 1 ],\n                                  returned;\n                              if ( _isFunction( fn ) ) {\n                                deferred[ handler ](function() {\n                                    returned = fn.apply( this, arguments );\n                                    if ( returned && _isFunction( returned.promise ) ) {\n                                      returned.promise().then( newDefer.resolve, newDefer.reject, newDefer.notify );\n                                    } else {\n                                      newDefer[ action + \"With\" ]( this === deferred ? newDefer : this, [ returned ]);\n                                    }\n                                  });\n                              } else {\n                                deferred[ handler ]( newDefer[ action ] );\n                              }\n                            });\n                        }).promise();\n                    },\n                  // Get a promise for this deferred\n                  // If obj is provided, the promise aspect is added to the object\n                  promise: function( obj ) {\n                      if ( !obj ) {\n                        obj = promise;\n                      } else {\n                        for ( var key in promise ) {\n                          obj[ key ] = promise[ key ];\n                        }\n                      }\n                      return obj;\n                    }\n                },\n              deferred = promise.promise({}),\n              key;\n\n          for ( key in lists ) {\n            deferred[ key ] = lists[ key ].fire;\n            deferred[ key + \"With\" ] = lists[ key ].fireWith;\n          }\n\n          // Handle state\n          deferred.done(function() {\n              state = \"resolved\";\n            }, failList.disable, progressList.lock ).fail(function() {\n              state = \"rejected\";\n            }, doneList.disable, progressList.lock );\n\n          // Call given func if any\n          if ( func ) {\n            func.call( deferred, deferred );\n          }\n\n          // All done!\n          return deferred;\n        };\n\n    // Deferred helper\n    _d.when = function( firstParam ) {\n        var args = slice.call( arguments, 0 ),\n            i = 0,\n            length = args.length,\n            pValues = new Array( length ),\n            count = length,\n            pCount = length,\n            deferred = length <= 1 && firstParam && _isFunction( firstParam.promise ) ?\n                firstParam :\n                _d.Deferred(),\n            promise = deferred.promise();\n        function resolveFunc( i ) {\n          return function( value ) {\n              args[ i ] = arguments.length > 1 ? slice.call( arguments, 0 ) : value;\n              if ( !( --count ) ) {\n                deferred.resolveWith( deferred, args );\n              }\n            };\n        }\n        function progressFunc( i ) {\n          return function( value ) {\n              pValues[ i ] = arguments.length > 1 ? slice.call( arguments, 0 ) : value;\n              deferred.notifyWith( promise, pValues );\n            };\n        }\n        if ( length > 1 ) {\n          for ( ; i < length; i++ ) {\n            if ( args[ i ] && args[ i ].promise && _isFunction( args[ i ].promise ) ) {\n              args[ i ].promise().then( resolveFunc( i ), deferred.reject, progressFunc( i ) );\n            } else {\n              --count;\n            }\n          }\n          if ( !count ) {\n            deferred.resolveWith( deferred, args );\n          }\n        } else if ( deferred !== firstParam ) {\n          deferred.resolveWith( deferred, length ? [ firstParam ] : []);\n        }\n        return promise;\n      };\n\n    // Try exporting as a Common.js Module\n    if ( typeof module !== \"undefined\" && module.exports ) {\n      module.exports = _d;\n\n    // Or mixin to Underscore.js\n    } else if ( typeof root._ !== \"undefined\" ) {\n      root._.mixin( _d );\n\n    // Or assign it to window._\n    } else {\n      root._ = _d;\n    }\n\n  })( this );\n\n  // Export the code as a node module.\n  if ( typeof module !== \"undefined\" && module.exports ) {\n    var _ = module.exports;\n    module.exports = function( utils ) {\n        utils._ = _;\n      };\n  }\n\n}).call( this.lanyrd && this.lanyrd.utils );\n/*globals ActiveXObject */\n(function( utils ) {\n    // Node specific code.\n    if ( typeof module !== \"undefined\" && module.exports ) {\n      return (function() {\n          var url  = require(\"url\" ),\n              http = require(\"http\" );\n\n          module.exports = function( utils ) {\n              utils.json = utils.jsonp = function( uri, fn ) {\n                  var parsed   = url.parse( uri ),\n                      deferred = utils.deferred(),\n                      promise  = deferred.promise();\n\n                  promise.xhr = http.get( parsed, function( res ) {\n                      var data = [];\n\n                      res.on( \"data\", function( chunk ) {\n                          data.push( chunk );\n                        });\n\n                      res.on( \"end\", function() {\n                          try {\n                            if ( res.statusCode >= 200 && res.statusCode < 300 ) {\n                              deferred.resolve( JSON.parse( data.join() ), res );\n                            } else {\n                              deferred.reject( res );\n                            }\n                          } catch ( error ) {\n                            deferred.reject( res, error );\n                          }\n                        });\n                    });\n\n                  return promise;\n                };\n              return utils;\n            };\n        })();\n    }\n\n    // Browser specific code.\n    var head = document.getElementsByTagName( \"head\" )[ 0 ],\n        uuid = 0;\n\n    function createXMLHTTPObject() {\n      var factory = createXMLHTTPObject.cached,\n          XMLHttpFactories, xhr = null;\n\n      if ( factory ) {\n        return factory();\n      }\n\n      XMLHttpFactories = [\n          function() { return new XMLHttpRequest(); },\n          function() { return new ActiveXObject(\"Msxml2.XMLHTTP\"); },\n          function() { return new ActiveXObject(\"Msxml3.XMLHTTP\"); },\n          function() { return new ActiveXObject(\"Microsoft.XMLHTTP\"); }\n      ];\n\n      do {\n        factory = XMLHttpFactories.shift();\n        try {\n          xhr = factory();\n          createXMLHTTPObject.cached = factory;\n          break;\n        } catch ( error ) {}\n      } while ( XMLHttpFactories.length);\n\n      return xhr;\n    }\n\n    function json( url, fn ) {\n      var xhr = createXMLHTTPObject(),\n          deferred = lanyrd.utils.deferred();\n\n      xhr.open( \"GET\", url, true );\n      xhr.onreadystatechange = function() {\n          var data;\n          if ( xhr.readyState === 4 ) {\n            try {\n              if ( xhr.status >= 200 && xhr.status < 300 ) {\n                data = JSON.parse( xhr.responseText );\n                deferred.resolve( data, xhr );\n              } else {\n                deferred.reject( xhr );\n              }\n            } catch ( error ) {\n              deferred.reject( xhr, error );\n            }\n          }\n        };\n\n      if ( xhr.readyState !== 4 ) {\n        xhr.send();\n      }\n\n      // This might be a bad idea...\n      return deferred.promise( xhr ).done( fn );\n    }\n\n    function jsonp( url, fn ) {\n      var deferred = lanyrd.utils.deferred(),\n          script = document.createElement( \"script\" ),\n          callback = \"callback\" + (uuid += 1),\n          esc = encodeURIComponent,\n          key;\n\n      url = url.replace( /\\?$/, callback );\n      window[ callback ] = function( json ) {\n          deferred.resolve( json );\n          delete window[ callback ];\n        };\n\n      script.src = url;\n      script.onload = script.onreadystatechange = function() {\n          if ( !script.readyState || /loaded|complete/.test( script.readyState ) ) {\n            script.onload = script.onreadystatechange = null;\n            script.parentNode.removeChild( script );\n            script = undefined;\n          }\n        };\n      head.insertBefore( script, head.lastChild );\n\n      setTimeout( deferred.reject, 30000 );\n      return deferred.promise().done( fn );\n    }\n\n    lanyrd.utils.json  = json;\n    lanyrd.utils.jsonp = jsonp;\n\n  })( this.lanyrd && this.lanyrd.utils );\n"]}