!function(){"use strict";lanyrd.widget={};var e=function(){var e=/{{\s*([a-z0-9_][\\.a-z0-9_]*)\s*}}/gi;return function(n,r){return n.replace(e,function(e,n){for(var t=n.split("."),a=t.length,l=r,i=0;i<a;i++){if(l=l[t[i]],void 0===l)throw"tim: '"+t[i]+"' not found in "+e;if(i===a-1)return l}})}}();lanyrd.widget.people=function(n,r,t){function a(e){return t.all?lanyrd.utils.when(e.related("conference.attendees").all(),e.related("conference.trackers").all()):lanyrd.utils.when(e.related("conference.attendees").fetch(),e.related("conference.trackers").fetch())}function l(e){r&&(t.append?r.innerHTML+=e:r.innerHTML=e)}function i(n,r){function a(n,r){var a,l=t.peopleTemplate||'<ul class="lanyrd-people {{peopleType}}">{{list}}</ul>',i=t.personTemplate||'<li><a href="{{web_url}}"><img class="lanyrd-avatar" title="{{name}} ({{username}})" src="{{avatar_url}}"></a></li>',s="",c=0;for(c;c<n.length;c++)a=n[c].user||n[c],s+=e(i,a);d+=e(l,{list:s,peopleType:r})}var l=lanyrd.utils.deferred(),i=l.promise(),d="";return d+="<h"+t.headingLevel+' class="lanyrd-attendees-title">'+n.length+" attending</h"+t.headingLevel+">",a(n,"lanyrd-attendees"),s&&(d+=e('<p><a target="_blank" href={{web_url}}attendees>&rarr; Attendee details</a></p>',s)),r.length>0&&(d+="<h"+t.headingLevel+' class="lanyrd-trackers-title">'+r.length+" tracking</h"+t.headingLevel+">",a(r,"lanyrd-trackers")),d='<div class="lanyrd-widget"><style>.lanyrd-people, .lanyrd-people li  {padding: 0;margin: 0;}.lanyrd-people, .lanyrd-people li { overflow: hidden;}.lanyrd-people li {list-style: none;float: left;padding-right: 6px;}</style>'+d+"</div>",l.resolve(d),i}var d,s,t=t||{};return t.all=t.all||!0,t.headingLevel=t.headingLevel||2,lanyrd.utils.isArray(n)&&n.length>1?(n=lanyrd.utils.map(n,function(e){return lanyrd.conference(e).fetch()}),d=lanyrd.mergeRelated(n,{related:["attendees","trackers"]}).pipe(function(e){return i(e.attendees,e.trackers).then(l)})):(n+="",d=lanyrd.conference(n).fetch().pipe(function(e){return s=e.get("conference"),e}).pipe(a).pipe(function(e,n){return i(e.get("attendees"),n.get("trackers")).then(l)})),d},lanyrd.widget.person=function(n,r,t){function a(n){var r,a=lanyrd.utils.deferred(),l=a.promise(),i=t.personTemplate||'<h2><a href="{{web_url}}">{{name}}</a></h2><img class="lanyrd-avatar" title="{{name}} ({{username}})" src="{{avatar_url}}"><p>{{short_bio}}</p>';return r=e(i,n),a.resolve(r),l}var l,t=t||{};return l=lanyrd.person(n).fetch().pipe(function(e){return e.get("user")}).pipe(function(e){return a(e).then(function(e){r&&(r.innerHTML=e)})})}}();
//# sourceMappingURL=lanyrd.widget.js.map
